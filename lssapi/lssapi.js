(()=>{"use strict";(()=>{class t{static entities={localStorage:{},sessionStorage:{}};static entitiesList=[];static storageChoice=localStorage;constructor(e,s,i=localStorage){if(t.storageChoice=i,i&&(i.getItem("0numberOfInstances")||i.setItem("0numberOfInstances",""),i.getItem("0numberOfEntities")||i.setItem("0numberOfEntities","1"),!i.getItem("0entitiesEnum"))){let n;i.setItem("0entitiesEnum",e),i===localStorage?"localStorage":"sessionStorage",t.entities[n].entityName.id=1,t.entities[n].entityName.name=e,t.entities[n].entityName.props=s,t.entities[n].entityName.numberOfInstances=0}}static addEntity=(e,s,i=t.storageChoice)=>{let n=this.getNumberOfEntities(i),r=JSON.stringify(s);i.setItem(`${n}.0entityName`,e),i.setItem(`${n}.0numberOfInstances`,"0"),i.setItem(`${n}.0propertiesType`,r)};static createInstance=(e,s,i=t.storageChoice)=>{let n=this.getEntityID(e,i),r=this.getNumberOfInstances(e,i),a=JSON.stringify(s);r&&0,i.setItem(`${n}.${r}`,a);let c=i.getItem(`${n}.0numberOfInstances`);c&&i.setItem(`${n}.0numberOfInstances`,c)};static getInstance=(e,s,i=t.storageChoice)=>{let n=this.getEntityID(e,i);if(n){let t=i.getItem(`${n}.${s}`);if(t)return JSON.parse(t)}return null};static getInstances=(e,s=t.storageChoice)=>{let i=[],n=this.getEntityID(e,s);if(n){let t=s.getItem(`${n}.0numberOfInstances`);if(t)for(let e=1;e<=parseInt(t);e++){let t=s.getItem(`${n}.${e}`);t&&i.push(JSON.parse(t))}return i}return null};static getProperties=(e,s=t.storageChoice)=>{let i,n=this.getEntityID(e,s);if(n){let t=s.getItem(`${n}.0properties`);if(t)return JSON.parse(t),i}return null};static updateEntity=async(e,s,i=t.storageChoice)=>{const n=this.getEntityID(e,i);return!!n&&(i.setItem(`${n}.0propertiesType`,JSON.stringify(s)),!0)};static updateInstance=async(e,s,i,n=t.storageChoice)=>{let r=this.getEntityID(e,n);return!!n.getItem(`${r}.${s}`)&&(n.setItem(`${r}.${s}`,JSON.stringify(i)),!0)};static updateInstances=async(e,s,i,n=t.storageChoice)=>{let r=this.getEntityID(e,n),a=this.getNumberOfInstances(e,n);if(r&&a)for(let t=1;t<=a;t++){if(n.getItem(`${r}.${s}`))return n.setItem(`${r}.${s}`,JSON.stringify(i)),!0}return!1};static deleteEntity=(t,e=!1)=>{};static getNumberOfInstances=(e,s=t.storageChoice)=>{let i,n=this.getEntityID(e);if("string"==typeof n){let t=s.getItem(`${n}0numberOfInstances`);if(t)return parseInt(t),i}return null};static getNumberOfEntities=t=>{let e=[],s=t.getItem("0entitiesEnum");return s?(JSON.parse(s),Object.keys(t),parseInt(e[e.length-1])):0};static getEntityID=(e,s=t.storageChoice)=>{let i=s.getItem("0entitiesEnum"),n={};return i?(JSON.parse(i),n[e]):null};static updateProps=(t,e)=>{Object.keys(t)}}})()})();